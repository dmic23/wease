<div id="sidebar-wrap" ng-controller="NavController as vm">
  <accordion close-others="oneAtTime" slimscroll="{height: '100%'}">

    <accordion-group is-open="status.isFirstOpen" ng-class="{'open': status.isFirstOpen, 'closed': !status.isFirstOpen}">
      <accordion-heading>
        Navigation <i class="fa" ng-class="{'fa-angle-up': status.isFirstOpen, 'fa-angle-down': !status.isFirstOpen}"></i>
      </accordion-heading>
      <ul id="navigation" nav-collapse ripple ng-transclude>
        <li ui-sref-active="active"><a ui-sref="app.dashboard"><fa name="dashboard"></fa> <span>Dashboard</span></a>
        </li>
        <li ui-sref-active="active" ng-show="vm.user.optiz">
          <a ui-sref="app.forms"><fa name="circle-o-notch"></fa> <span>Optiz</span></a>
          <ul>
            <li ui-sref-active="active" ng-controller="SearchCompanyModalCtrl"><a href="javascript:;" ng-click="open();"><fa name="caret-right"></fa> Search Company</a></li>
            <li><a ui-sref="app.pages.company-create"><fa name="caret-right"></fa> Register Company</a></li>
            <li ui-sref-active="active"><a ui-sref="app.orders.blankoffer"><fa name="caret-right"></fa> Blank Offer</a></li>
          </ul>
        </li>
        <li ui-sref-active="active" ng-class="{'open':$state.includes('app.pages')}">
           <a ui-sref="app.pages."><fa name="group"></fa> <span>{{ vm.user.user_company_full }}</span></a>
          <ul>
            <li ui-sref-active="active"><a ui-sref="app.pages.company-profile({companyId:vm.user.user_company})"><fa name="caret-right"></fa> {{ vm.user.user_company_full }} Profile</a></li>
            <li ui-sref-active="active"><a ui-sref="app.orders.all"><fa name="caret-right"></fa> History</a></li>
          </ul>
        </li>
        <nav-items ui-sref-active="active" ng-class="{'open':$state.includes('app.orders.request({goodId:value.id)')}" ng-repeat="(domain, value) in vm.allGoods | groupBy: 'domain' | orderBy:'id'" nav-item="{{value}}" dom="{{domain}}" icon="{{vm.icon}}" ng-if="sub"> 
        </nav-items>     
        <li ui-sref-active="active" ng-class="{'open':$state.includes('app.mail')}">
          <a ui-sref="app.mail"><fa name="envelope-o"></fa> <span>Mail</span> <span class="badge bg-lightred">{{msgs.inbox.length}}</span></a>
          <ul>
            <li ui-sref-active="active"><a ui-sref="app.mail.inbox"><fa name="caret-right"></fa> Inbox</a></li>
            <li ui-sref-active="active"><a ui-sref="app.mail.compose"><fa name="caret-right"></fa> Compose Mail</a></li>
          </ul>
        </li>
      </ul>
    </accordion-group>
  </accordion>
</div>
