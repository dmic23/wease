<div class="page page-profile">




  <!-- page header -->
  <div class="pageheader">

    <h2>{{page.title}} <span>for</span> {{ vm.account.first_name }}</h2>

    <div class="page-bar">

      <ul class="page-breadcrumb">
        <li>
          <a ui-sref="app.dashboard"><i class="fa fa-home"></i> {{main.title}}</a>
        </li>
        <li>
          <a ui-sref="app.pages.company-profile({companyId:vm.account.user_company})">{{ vm.account.user_company_full }} Page</a>
        </li>
        <li>
          <a ui-sref="app.pages.profile">{{page.title}}</a>
        </li>
      </ul>

    </div>

  </div>
  <!-- /page header -->

  <!-- page content -->
  <div class="pagecontent">


    <!-- row -->
    <div class="row">

      <!-- col -->
      <div class="col-md-4">

        <!-- tile -->
        <section class="tile tile-simple">

          <!-- tile widget -->
          <div class="tile-widget p-30 text-center">

            <div class="thumb thumb-xl">
              <img class="img-circle" ng-src="{{ path.media }}{{ vm.account.user_pic }}" alt=""/>
            </div>
            <h4 class="mb-0"><strong>{{ vm.account.first_name }}</strong> {{ vm.account.last_name }}</h4>
            <span class="text-muted text-lightred">{{ vm.account.position }}</span>
            <div class="mt-10">
              <button class="btn btn-rounded-20 btn-sm btn-greensea" ng-click="main.settings.rightbarShow = !main.settings.rightbarShow">Chat</button>
              <button class="btn btn-rounded-20 btn-sm btn-lightred" ui-sref="app.mail.compose">Message</button>
            </div>

          </div>
          <!-- /tile widget -->
        </section>
        <!-- /tile -->

        <!-- tile -->
        <section class="tile tile-simple">

          <!-- tile header -->
          <div class="tile-header">
            <h1 class="custom-font team"><strong>Team</strong ui-sref="app.pages.company-profile({companyId:vm.company.id})"> {{ vm.account.user_company_full }}</h1>
          </div>
          <!-- /tile header -->

          <!-- tile body -->
          <div class="tile-body">

            <div class="media team" ng-repeat="user in vm.company.wease_company" ui-sref="app.pages.profile({username:user.username})">
              
              <div class="pull-left thumb">
                <img class="media-object img-circle" ng-src="{{ path.media }}{{ user.user_pic }}" alt="">
              </div>
              <div class="media-body">
                <p class="media-heading mb-0 mt-10">{{ user.first_name }} <strong>{{ user.last_name }}</strong></p>
                <small class="text-lightred">{{ user.position }}</small><br/>
                <small class="">{{ user.city }}, {{ user.country }}</small>
              </div>

              <hr/>
            </div>
          </div>
          <!-- /tile body -->

        </section>
        <!-- /tile -->
      </div>
      <!-- /col -->
      <!-- col -->
      <div class="col-md-8">

        <!-- tile -->
        <section class="tile tile-simple">
          <!-- tile header -->

          <!-- tile body -->
          <div class="tile-body p-0">

            <tabset class="tabs-dark">

              <tab heading="Profile">
                <div class="wrap-reset">
                  <div class="tile-header">
                    <h1 class="custom-font"><strong>About</strong> {{ vm.account.first_name }}</h1>
                  </div>
                  <div class="title-body">
                      <h4 ng-show="vm.account.position"><span class="text-lightred">{{vm.account.position}} </span> at <span class="team" ui-sref="app.pages.company-profile({companyId:vm.company.id})">{{vm.company.name}}</span></h4>
                      <p ng-show="vm.account.tagline"><em>"{{ vm.account.tagline }}"</em></p>
                    <div class="row">
                      <div class="col-md-12 p-20">

                        <div class="row">
                            <div class="form-group col-sm-6">
                                <label class="" for="street_addr1">Address Line 1</label>
                                <h4 class="form-control-static text-blue">{{vm.account.street_addr1}}</h4>
                            </div>
                            <div class="form-group col-sm-6">
                                <label class="" for="street_addr2">Address Line 2</label>
                                <h4 class="form-control-static text-blue">{{vm.account.street_addr2}}</h4>
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group col-sm-4">
                                <label class="" for="city">City</label>
                                <h4 class="form-control-static text-blue">{{vm.account.city}}</h4>
                            </div>
                            <div class="form-group col-sm-4">
                                <label class="" for="post_code">Post Code</label>
                                <h4 class="form-control-static text-blue">{{vm.account.post_code}}</h4>
                            </div>
                            <div class="form-group col-sm-4">
                                <label class="" for="country">Country</label>
                                <h4 class="form-control-static text-blue">{{vm.account.country}}</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-sm-4">
                                <label class="" for="email">E-mail</label>
                                <h4 class="form-control-static"><a href="mailto:{{vm.account.email}}">{{vm.account.email}}</a></h4>
                            </div>
                            <div class="form-group col-sm-4">
                                <label class="" for="phone">Phone Main</label>
                                <h4 class="form-control-static text-blue">{{vm.account.phone_main}}</h4>
                            </div>
                            <div class="form-group col-sm-4" ng-show="au.id === vm.acount.id || mgr || admin">
                                <label class="" for="phone">Authorized Amount</label>
                                <h4 class="form-control-static text-blue">€ {{vm.account.auth_amount}}</h4>
                            </div>
                        </div>

                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12 p-20 b-t">
                        <div class="thumb" ng-show="vm.company.company_website">
                          <a href="http://{{vm.company.company_website}}"><img class="media-object img-circle" ng-src="{{path.media}}{{vm.company.company_logo}}" alt="">
                          {{vm.company.company_website}}</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </tab>

              <tab heading="Info" ng-if="vm.isUser">
                <div class="wrap-reset">

                  <form class="profile-settings form-validation" name="userProfForm" ng-submit="vm.update(vm.account)" novalidate>

                    <div class="row">
                      <div class="form-group col-md-12 legend">
                        <h4><strong>Personal</strong> Settings</h4>
                        <p>Your personal account settings</p>
                      </div>
                    </div>

                    <div class="row">
                        <div class="form-group col-sm-6">
                            <label for="first-name">First Name</label>
                            <input type="text" class="form-control" name="first_name" ng-model="vm.account.first_name" required>
                            <span class="text-red" ng-show="userProfForm.first_name.$invalid">Required</span>
                        </div>
                        <div class="form-group col-sm-6">
                            <label for="last-name">Last Name</label>
                            <input type="text" class="form-control" name="last_name" ng-model="vm.account.last_name" required>
                            <span class="text-red" ng-show="userProfForm.last_name.$invalid">Required</span>
                        </div>
                    </div>
                    <div class="row">

                        <div class="form-group col-sm-6">
                            <label for="email">E-mail</label>
                            <input type="email" class="form-control" name="email" ng-model="vm.account.email" required>
                            <span class="text-red" ng-show="userProfForm.email.$invalid">Required</span>
                        </div>
                        <div class="form-group col-sm-6">
                            <label for="position">Position</label>
                            <input type="text" class="form-control" name="position" ng-model="vm.account.position" required>
                            <span class="text-red" ng-show="userProfForm.position.$invalid">Required</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-sm-6">
                            <label for="first-name">WeASe Access Level</label>
                            <select ng-if="vm.isAdmin"
                                    class="form-control" 
                                    chosen width="'100%'" 
                                    name="access_level"
                                    ng-model="vm.account.access_level"
                                    ng-options="k for (k,v) in vm.access_level_val" 
                                    data-placeholder="Select Access Level"
                                    required>
                                    <option value=""></option>
                            </select>
                            <p class="form-control-static" ng-hide="vm.isAdmin">{{vm.access_level_full[vm.account.access_level];}}</p>
                            <span class="text-red" ng-show="userProfForm.access_level.$invalid">Required</span>
                        </div>
                        <div class="form-group col-sm-6">
                            <label for="position">Authorization Amount</label>
                            <div class="input-group">
                              <span class="input-group-addon">€</span>
                              <input type="text" class="form-control" name="auth_amount" placeholder="Enter an authorization amount" ng-model="vm.account.auth_amount" ng-minlength=1 ng-maxlength=7 required ng-disabled="!{{vm.isAdmin}}">
                            </div>
                            <span class="text-red" ng-show="userProfForm.auth_amount.$invalid">Required</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-sm-6">
                            <label for="address1">Address Line 1</label>
                            <input type="text" class="form-control" ng-model="vm.account.street_addr1">
                        </div>
                        <div class="form-group col-sm-6">
                            <label for="address2">Address Line 2</label>
                            <input type="text" class="form-control" ng-model="vm.account.street_addr2">
                        </div>
                    </div>
                    <div class="row">

                        <div class="form-group col-sm-4">
                            <label for="city">City</label>
                            <input type="text" class="form-control" ng-model="vm.account.city">
                        </div>
                        <div class="form-group col-sm-4">
                            <label for="zip">Zip Code</label>
                            <input type="text" class="form-control" ng-model="vm.account.post_code">
                        </div>
                        <div class="form-group col-sm-4">
                            <label for="country">Country</label>
                            <select class="form-control" 
                                    chosen width="'100%'" 
                                    ng-model="vm.account.country"
                                    ng-options="country for country in countries"
                                    data-placeholder="Choose a country">
                                    <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group col-sm-6">
                            <label for="company_logo">Profile Picture</label>
                            <input ui-jq="filestyle" type="file" class="filestyle" ui-options="{
                            buttonText: 'Find file',
                            iconName: 'glyphicon-file'
                            }" nv-file-select="" uploader="uploader">
                            <span class="help-block">Allowed files: gif, png, jpg</span>
                        </div>
                        <div class="form-group col-sm-6">
                            <label for="tagline">Tag line</label>
                            <textarea class="form-control" rows="2" ng-model="vm.account.tagline">{{ vm.account.tagline }}</textarea>
                        </div>
                    </div>
                    <div class="row" ng-show="vm.isFile">
                        <div class="col-md-9 mb-20" >
                            <table class="table">
                                <thead>
                                    <tr>
                                    <th width="50%">Name</th>
                                    <th ng-show="uploader.isHTML5">Size</th>
                                    <th ng-show="uploader.isHTML5">Progress</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="item in uploader.queue">
                                    <td><strong>{{ item.file.name }}</strong></td>
                                    <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>
                                    <td ng-show="uploader.isHTML5">
                                        <div class="progress" style="margin-bottom: 0;">
                                        <div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                                        <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                                        <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                                    </td>
                                    <td nowrap>
                                        <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">
                                        <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                                        </button>
                                        <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                                        <span class="glyphicon glyphicon-trash"></span> Remove
                                        </button>
                                    </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-sm-6">
                            <label for="phone">Phone Main</label>
                            <input type="text" class="form-control" ng-model="vm.account.phone_main">
                            <span class="help-block">+(34) 13 24 76 98</span>
                        </div>
                        <div class="form-group col-sm-6">
                            <label for="phone">Phone Mobile</label>
                            <input type="text" class="form-control" ng-model="vm.account.phone_mobile">
                            <span class="help-block">+(34) 13 24 76 98</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12 legend">
                            <h4><strong>Security</strong> Settings</h4>
                            <p>Secure your account</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-sm-6">
                            <label for="username">Username</label>
                            <input type="text" class="form-control" name="username" ng-model="vm.account.username" required>
                            <span class="text-red" ng-show="userProfForm.username.$invalid">Required</span>
                        </div>
                        <div class="form-group col-sm-6">
                            <label for="password">Current Password</label>
                            <input type="password" class="form-control" value="secretpassword" readonly>
                        </div>
                        <div class="form-group col-sm-6">
                            <label for="new-password">New Password</label>
                            <input type="password" class="form-control" name="password" ng-model="vm.account.password">
                        </div>
                        <div class="form-group col-sm-6">
                            <label for="new-password-repeat">New Password Confirm</label>
                            <input type="password" class="form-control" name="confirm_password" ng-model="vm.account.confirm_password" ui-validate=" '$value==vm.account.password' " ui-validate-watch=" 'vm.account.password' ">
                            <span class="text-red" ng-show='userProfForm.confirm_password.$error.validator'>Passwords don't match!</span>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-rounded btn-primary">Update Profile</button>
                  </form>
                </div>
              </tab>

              <tab heading="Preferences" ng-if="vm.isUser">
                <div class="wrap-reset">
                  <div class="row">
                    <div class="form-group col-md-12 legend">
                      <h4><strong>Email notification </strong>Preferences</h4>
                      <p>Select the boxes below to recieve notifications by email</p>
                    </div>
                  </div>
                  <div class="title-body">
                    <div class="row">

                      <div class="form-group col-sm-6">
                        <label class="checkbox checkbox-custom">
                          <input type="checkbox" ng-model="vm.account.request_email"><i></i> New/Updated Requests
                        </label>
                        <label class="checkbox checkbox-custom">
                          <input type="checkbox" ng-model="vm.account.approval_email"><i></i> Request Approval Needed
                        </label>
                        <label class="checkbox checkbox-custom">
                          <input type="checkbox" ng-model="vm.account.offer_email"><i></i> New/Updated Offers
                        </label>
                        <label class="checkbox checkbox-custom">
                          <input type="checkbox" ng-model="vm.account.validated_email"><i></i> Validated Offer
                        </label>
                        <label class="checkbox checkbox-custom">
                          <input type="checkbox" ng-model="vm.account.refused_email"><i></i> Refused Offer
                        </label>                        
                      </div>

                      <div class="form-group col-sm-6">
                        <label class="checkbox checkbox-custom">
                          <input type="checkbox" ng-model="vm.account.order_email"><i></i> Completed Order
                        </label>
                        <label class="checkbox checkbox-custom">
                          <input type="checkbox" ng-model="vm.account.canceled_email"><i></i> Canceled Request
                        </label>
                        <label class="checkbox checkbox-custom">
                          <input type="checkbox" ng-model="vm.account.new_user_email"><i></i> New Team Member
                        </label>
                        <label class="checkbox checkbox-custom">
                          <input type="checkbox" ng-model="vm.account.info_change_email"><i></i> Personal Data Change
                        </label>                        
                      </div>
                      <button class="btn btn-rounded btn-primary" ng-click="vm.update(vm.account);">Update Preferences</button>
                    </div>
                  </div>
                </div>
              </tab>

              <tab heading="Admin" ng-if="vm.isAdmin">
                <div class="wrap-reset">
                  <div class="row">
                    <div class="form-group col-md-12 legend">
                      <h4><strong>User </strong>Admin</h4>
                      <p>Update user account below</p>
                    </div>
                  </div>
                  <div class="title-body">
                    <div class="row">
                      <div class="col-md-12">
                        <h3 class="m-20">Deactivate {{vm.account.user_name_full}}</h3>

                        <button class="btn btn-rounded btn-lightred" ng-controller="DeactivateUserModalCtrl"  ng-click="open('md')">Deactivate {{vm.account.user_name_full}}</button>

                      </div>
                    </div>
                  </div>
                </div>
              </tab>

            </tabset>

          </div>
          <!-- /tile body -->

        </section>
        <!-- /tile -->

      </div>
      <!-- /col -->

    </div>
    <!-- /row -->
  </div>
  <!-- /page content -->

</div>
