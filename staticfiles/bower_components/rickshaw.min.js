"use strict";angular.module("angular-rickshaw",[]).directive("rickshaw",["$compile",function(e){return{restrict:"EA",scope:{options:"=rickshawOptions",series:"=rickshawSeries",features:"=rickshawFeatures"},link:function(r,a,t){function i(e){var a=angular.copy(r.options);return a.element=e,a.series=r.series,a}function s(){var t=angular.element(a);t.append(s),t.empty();var s=e("<div></div>")(r);t.append(s);var u=i(s[0]);if(n=new Rickshaw.Graph(u),r.features&&r.features.hover){var o={graph:n};o.xFormatter=r.features.hover.xFormatter,o.yFormatter=r.features.hover.yFormatter,o.formatter=r.features.hover.formatter;{new Rickshaw.Graph.HoverDetail(o)}}if(r.features&&r.features.palette)for(var f=new Rickshaw.Color.Palette({scheme:r.features.palette}),h=0;h<u.series.length;h++)u.series[h].color=f.color();if(n.render(),r.features&&r.features.xAxis){var c={graph:n};if(r.features.xAxis.timeUnit){var l=new Rickshaw.Fixtures.Time;c.timeUnit=l.unit(r.features.xAxis.timeUnit)}var p=new Rickshaw.Graph.Axis.Time(c);p.render()}if(r.features&&r.features.yAxis){var g={graph:n};r.features.yAxis.tickFormat&&(g.tickFormat=Rickshaw.Fixtures.Number[r.features.yAxis.tickFormat]);var v=new Rickshaw.Graph.Axis.Y(g);v.render()}if(r.features&&r.features.legend){var w=e("<div></div>")(r);t.append(w);var d=new Rickshaw.Graph.Legend({graph:n,element:w[0]});if(r.features.legend.toggle){new Rickshaw.Graph.Behavior.Series.Toggle({graph:n,legend:d})}if(r.features.legend.highlight){new Rickshaw.Graph.Behavior.Series.Highlight({graph:n,legend:d})}}}var n,u=r.$watch("options",function(e,r){angular.equals(e,r)||s()}),o=r.$watch(function(e){if(e.features&&e.features.directive&&e.features.directive.watchAllSeries){for(var r={},a=0;a<e.series.length;a++)r["series"+a]=e.series[a].data;return r}return e.series[0].data},function(e,r){angular.equals(e,r)||s()},!0),f=r.$watch("features",function(e,r){angular.equals(e,r)||s()});r.$on("$destroy",function(){u(),o(),f()}),s()},controller:["$scope","$element","$attrs",function(e,r,a){}]}}]);